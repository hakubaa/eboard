{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}

{% block title %}JAGO - e-Board - Project{% endblock %}

{% block styles %}
{{ super() }}
<link rel="stylesheet" href="{{url_for('static', filename='css/eboard.project.css')}}">
{% endblock %}

{% block content %}
<div class="container">
    <div class="page-header project-page-header" data-project-id="{{project.id}}">
        <h1 id="project-main-header">Project {{project.name}}</h1>
        <a href="{{url_for('eboard.project_edit', username=user.username, project_id=project.id)}}" 
            class="btn btn-primary btn-xs" role="button">Edit</a>
        <a href="{{url_for('eboard.project_remove', projectid=project.id)}}" 
            onclick="return confirm('Are your sure you want to remove the project, its all milestones, tasks and notes?')"
            class="btn btn-danger btn-xs" role="button">Remove</a>
        <div>
            <div class="progress">
                <div class="progress-bar progress-bar-success" role="progressbar" 
                    aria-valuenow="{{project.progress}}" aria-valuemin="0" aria-valuemax="100" 
                    style="width: {{project.progress}}%">
                    {{project.progress}}% Complete
                </div>
            </div>
            <div>
                {{ project.created.strftime("%Y-%m-%d") }}
                <span id="progress-deadline">
                    {{ project.deadline.strftime("%Y-%m-%d") }}
                </span>
            </div>
        </div>
    </div>
</div>
<div class="container">
    <div class="project-plan-wrapper">
        <h3 class="project-header">Project Plan</h3>
        <ol class="project-plan" id="project-plan-id" start="1">
            <!-- Milestones go here. -->
            <li class="project-milestone project-extra-options">
                <a href="#" data-toggle="modal" data-target="#modal-milestone"
                    class="btn btn-primary btn-xs" role="button">Add Milestone</a>
            </li>
        </ol>
    </div>
    <div class="project-notes-wrapper">
        <h3 class="project-header">Project Notes</h3>
        <div id="add-note" class="btn btn-xs btn-primary" role="button">
            Add Note
        </div>
        <ul class="project-notes" id="project-notes-id">
            <!-- Milestones go here. -->
        </ul>
    </div>
</div>

<!-- Modal Milestone (New/Edit) -->
<div class="modal" id="modal-milestone" role="dialog" aria-labelledby="gridSystemModalLabel">
    <div class="modal-dialog  modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="gridSystemModalLabel">Create New Milestone</h4>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="usr">Title</label>
                    <input type="text" class="form-control" id="milestone-title">
                </div>
                <div class="form-group">
                    <label for="pwd">Description</label>
                    <textarea class="form-control" rows="5" id="milestone-desc"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="new-milestone-btn">Done</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
{% endblock %}

{% block body_scripts %}
<script src="{{ url_for('static', filename='js/eboard.project.js') }}"></script>
<script>
    project.init({username: "{{user.username}}", projectId: {{project.id}} }, 
        showProject);
    initUI();
</script>
{% endblock %}