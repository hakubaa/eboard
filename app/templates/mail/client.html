{% extends "base.html" %}

{% block title %}JAGO - e-Board - E-Mail Client{% endblock %}

{% block styles %}
{{ super() }}
<style>
    body {
        background-color: #333;
        color: white;
    }
    #mailbox-container {
        float: left;
        background-repeat: no-repeat;
        width: 240px;
        height: 100px;
        text-align: center;
    }
    #mailbox-list {
        margin: 0  auto;
        display: inline-block;
        list-style-type: none;
        margin: 0;
        padding: 0;
        width: 200px;
        background-color: grey; /*#5cb85c;*/
        color: black;
        border: 1px solid black;
    }
    #mailbox-list li {
        border: 1px solid black;
        padding: 10px;
    }
    #mailbox-list li:hover {
        background-color: #f0ad4e;
        cursor: pointer;
    }
    #emails-container {
        overflow:hidden; 
        background-color: grey;
        color: black;
    }
    #emails-list {
        width: 100%;
    }
    #emails-list tr {
        border: 1px solid black;
        padding: 2px;
    }
    #emails-list thead {
        background-color: #f0ad4e;
        color: black;
    }
    #emails-list tbody tr:hover {
        background-color: #f0ad4e;
        color: black;
        cursor: pointer;
    }
    th.header-from {
      width: 15%
    }
    th.header-date {
        width: 10%;
    }
    th.header-subject {
      width: 75%; 
    }
    .alert-username {
        background-color: #f0ad4e;
        color: black;
        border: 1px solid black;
        padding: 5px;
    }
    #email-modal {
        color: black;
    }
    #new-msg {
        margin-bottom: 5px;
        width: 70%;
        color: black !important;
    }
    #emails-ui {
        background-color: #333;
        padding-bottom: 5px;
    }
    #emails-ui button {
        color: black !important;
    }
    #page-emails {
        color: white;
    }
</style>
{% endblock %}

{% block page_content %}
{% include 'mail/email.html' %}
<div class="container">
    <div class="alert alert-username" role="alert">
        You're logged as <strong>{{username}}</strong> 
        (<a href="{{ url_for('mail.logout') }}">Log out</a>).
    </div>
    <div id="mailbox-container">
        <button id="new-msg" type="button" class="btn btn-warning">New Message</button>
        <ul id="mailbox-list"></ul>
    </div>
    <div id="emails-container">
        <div id="emails-ui">
            <span id="page-emails"></span>
            <button id="prev-emails-btn" type="button" class="btn btn-warning">
                &#8882
            </button>
            <button id="next-emails-btn" type="button" class="btn btn-warning">
                &#8883
            </button> 
        </div>
        <table id="emails-list">
            <thead>
                <tr>
                    <th class="header-from">From</th>
                    <th class="header-subject">Subject</th>
                    <th class="header-date">Date</th>
                </tr>
            </thead>
            <tbody>

            </tbody>
        </table> 
    </div>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script src="{{url_for('static', filename='scripts/moment.js')}}"></script>
<script src="{{url_for('static', filename='scripts/mail.client.js')}}"></script>
<script src="{{url_for('static', filename='scripts/mail.email.js')}}"></script>
<script>
    getMailboxes({callback: updateMailboxesList});
    EMailsListController.init({mailbox: "INBOX"});

    $(document).on("click", ".email-header", function() {
        $("#email-modal").data("email-id", $(this).data("email-id"));
        $("#email-modal").modal("show");
    });
    $("#prev-emails-btn").click(function() {
        EMailsListController.getPrevEMails();
    });
    $("#next-emails-btn").click(function() {
        EMailsListController.getNextEMails();
    });    
</script>
{% endblock %}