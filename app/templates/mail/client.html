{% extends "base.html" %}

{% block title %}JAGO - e-Board - E-Mail Client{% endblock %}

{% block styles %}
{{ super() }}
<style>
    body {
        background-color: #333;
        color: white;
    }
    #mailbox-container {
        float: left;
        background-repeat: no-repeat;
        width: 240px;
        height: 100px;
        text-align: center;
    }
    #mailbox-list {
        margin: 0  auto;
        display: inline-block;
        list-style-type: none;
        margin: 0;
        padding: 0;
        width: 200px;
        background-color: #444444;
        color: white;
        border: 1px solid #f0ad4e;
    }
    #mailbox-list li {
        border: 1px solid black; /*#f0ad4e;*/
        padding: 10px;
    }
    #mailbox-list li:hover {
        background-color: #f0ad4e;
        color: black;
        cursor: pointer;
    }
    #mailbox-list li.active {
        background-color: #f0ad4e;
        color: black;        
    }

    #emails-container {
        overflow:hidden; 
        color: black;
    }
    #emails-list {
        width: 100%;
        background-color: #444444; /*grey;*/
        color: white;
        margin-bottom: 10px;
        border: 1px solid #f0ad4e;
        border-collapse: separate;
        border-spacing: 0;
        word-wrap: break-word;
        word-break: break-all;
    }

    #emails-list td {
        border-bottom: 1px solid black;
        padding: 5px;
    }
    #emails-list th {
        padding: 5px;
    }
    #emails-list thead {
        background-color: #f0ad4e;
        color: black;
    }
    #emails-list th {
        font-weight: bodl;
    }
    #emails-list tr td {
        border-right: 0;
    }
    #emails-list tr:last-child td {
        border-bottom: 0;
    }
    #emails-list tr td:first-child,
    #emails-list tr th:first-child {
        border-left: 0;
    }
    #emails-list tr td{
        border-top: 0;
    }
    #emails-list tr:first-child td {
        border-top: 1px solid black;
    }
    #emails-list tbody tr:hover {
        background-color: #f0ad4e;
        color: black;
        cursor: pointer;
    }

    th.header-controls {
        width: 9%;
    }
    th.header-from {
        width: 15%
    }
    th.header-date {
        width: 10%;
    }
    th.header-subject {
      width: 65%; 
    }
    .alert-client {
        background-color: #f0ad4e;
        color: black;
        border: 1px solid black;
        padding: 5px;
    }
    #email-modal {
        color: black;
    }
    #new-msg {
        margin-bottom: 5px;
        width: 70%;
        color: black !important;
    }
    #emails-ui {
        background-color: #333;
        padding-bottom: 5px;
    }
    #emails-ui button {
        color: black !important;
    }
    #page-emails {
        color: white;
    }
    #client-info {
        float: right;
        color: black;
        font-weight: bold;
    }
    .email-header.unseen {
        background-color: #4e91f0;
        color: black;
    }
    .email-star {
        font-size: 2em;
    }
    .email-drag {
        font-size: 2em;
    }
    .email-drag:hover {
        cursor: move;
    }
    .email-dragged {
        border: 1px solid black;
        background-color: #f0ad4e;
        padding: 10px 20px;
    }
    #page-ui {
        float: right;
    }

    /* email modal */
    .email-node {
        list-style: none;
        padding-left: 0px;
    }
    #email-base {
        padding-left: 0px;
    }
</style>
{% endblock %}

{% block page_content %}
{% include 'mail/email.html' %}
<div class="container">
    <div class="alert alert-client" role="alert">
        You're logged as <strong>{{username}}</strong> 
        (<a href="{{ url_for('mail.logout') }}">Log out</a>).
        <span id="client-info"></span>
    </div>
    <div id="mailbox-container">
        <button id="new-msg" type="button" class="btn btn-warning">New Message</button>
        <ul id="mailbox-list"></ul>
    </div>
    <div id="emails-container">
        <div id="emails-ui">
            <select id="select-read">
                <option>ALL</option>
                <option>NONE</option>
                <option>READ</option>
                <option>UNREAD</option>
                <option>STARRED</option>
                <option>UNSTARRED</option>
            </select>
            <div id="">

            </div>
            <div id="page-ui">
                <span id="page-emails"></span>
                <button id="prev-emails-btn" type="button" class="btn btn-warning">
                    &#8882
                </button>
                <button id="next-emails-btn" type="button" class="btn btn-warning">
                    &#8883
                </button> 
            </div>
        </div>
        <table id="emails-list">
            <thead>
                <tr>
                    <th class="header-controls"></th>
                    <th class="header-from">From</th>
                    <th class="header-subject">Subject</th>
                    <th class="header-date">Date</th>
                </tr>
            </thead>
            <tbody>

            </tbody>
        </table> 
    </div>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script src="{{url_for('static', filename='scripts/jquery-ui.min.js')}}"></script>
<script src="{{url_for('static', filename='scripts/moment.js')}}"></script>
<script src="{{url_for('static', filename='scripts/mail.client.js')}}"></script>
<script src="{{url_for('static', filename='scripts/mail.email.js')}}"></script>
<script>
    getMailboxes({callback: updateMailboxesList});
    EMailsListController.init({mailbox: "INBOX"});

    $(document).on("click", ".email-open", function() {
        $("#email-modal").data("email-id", $(this).parent().data("email-id"));
        $("#email-modal").data("mailbox", EMailsListController.mailbox);
        $("#email-modal").modal("show");
    });
    $(document).on("click", "#mailbox-list li", function() {
        EMailsListController.selectMailbox($(this).data("name"));
    });
    $("#prev-emails-btn").click(function() {
        EMailsListController.getPrevEMails();
    });
    $("#next-emails-btn").click(function() {
        EMailsListController.getNextEMails();
    });    
</script>
{% endblock %}